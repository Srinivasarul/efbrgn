<div id="process">
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a class="text-decoration-none" routerLink="/ailab/dashboard">
          Dashboard
        </a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">Process</li>
    </ol>
  </nav>

  <div
    *ngIf="addPermission"
    class="bg-white p-3 mb-3 text-end"
    style="
      box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
      border-radius: 4px;
    "
  >
    <mat-slide-toggle
      [checked]="data.isActive"
      (change)="onSlideToggleChangeShowAll($event)"
      labelPosition="before"
    >
      <span class="p-0 m-0 font-weight-bold">Show All</span>
    </mat-slide-toggle>
    &nbsp; &nbsp; &nbsp; &nbsp;
    <button
      type="button"
      style="font-size: 13px; background-color: #133819; color: white"
      (click)="openTemplate()"
      class="btn btn-success mx-2 my-0"
    >
      <b>Download Template</b>
    </button>
    <input
      #processFileInput
      type="file"
      style="display: none"
      (change)="onFileChange($event)"
    />

    <button
      type="button"
      style="font-size: 13px; background-color: #133819; color: white"
      (click)="processFileInput.click()"
      class="btn btn-success mx-2 my-0"
    >
      <b>Excel Upload</b>
    </button>
    <button
      type="button"
      style="font-size: 13px; background-color: #133819; color: white"
      (click)="changeRoute('/ailab/process/process-details')"
      class="btn btn-success m-0"
    >
      <b>Add</b>
    </button>
  </div>
  <div
    style="
      box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;
      border-radius: 4px;
    "
  >
    <div class="col layout-main-section-wrapper bg-light">
      <div class="col layout-main-section-wrapper bg-light">
        <ejs-grid
          #grid
          [dataSource]="data"
          [allowPaging]="true"
          [allowSorting]="true"
          [allowFiltering]="true"
          [allowGrouping]="true"
          [editSettings]="{ allowEditing: true, allowDeleting: true }"
          [pageSettings]="pageSettings"
          [height]="gridHeight"
          (commandClick)="onCustomButtonClick($event)"
        >
          <e-columns>
            <e-column
              headerText="Action"
              width="60"
              [commands]="commands"
            ></e-column>
            <e-column
              field="operationCode"
              headerText="Process Code"
              width="160"
              type="string"
            ></e-column>
            <e-column
              field="operationDescription"
              headerText="Process Description"
              width="260"
              type="string"
            ></e-column>
            <e-column
              field="techniqueSheetID"
              headerText="Technique Sheet Id"
              width="160"
              type="string"
            ></e-column>

            <e-column
              field="operationNotes"
              headerText="Process Notes"
              width="160"
              type="string"
            ></e-column>

            <e-column
              field="createdAt"
              headerText="Created Date and Time"
              width="140"
              format="dd/MM/yyyy hh:mm a"
              type="dateTime"
            ></e-column>
            <e-column headerText="Is Active" width="80">
              <ng-template #template let-data>
                <ng-container
                  *ngTemplateOutlet="
                    slideToggleTemplate;
                    context: { $implicit: data }
                  "
                ></ng-container>
              </ng-template>
            </e-column>
          </e-columns>
        </ejs-grid>
        <ng-template #slideToggleTemplate let-data>
          <mat-slide-toggle
            [checked]="data.activeStatus"
            (change)="onSlideToggleChange($event, data)"
            labelPosition="before"
          >
            <span class="p-0 m-0 font-weight-bold"></span>
          </mat-slide-toggle>
        </ng-template>
      </div>
    </div>
  </div>
</div>
<ngx-spinner type="ball-scale-multiple">
  <img style="width: 300px" src="assets/dna.gif" />
</ngx-spinner>
